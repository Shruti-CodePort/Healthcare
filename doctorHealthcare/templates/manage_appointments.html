{% extends "dashboard-base.html" %}

{% block title %}Manage Appointments{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/doctor_appointments.css') }}" />
{% endblock %}

{% block main_content %}
<div class="appointments-manager container py-4">
    <div class="row mb-4">
        <div class="col">
            <h2>Manage Appointments</h2>
        </div>
        <div class="col-auto">
            <button class="btn btn-outline-primary me-2" id="viewScheduleBtn">
                <i class="fas fa-calendar"></i> View My Schedule
            </button>
            <button class="btn btn-primary" id="addScheduleBtn">
                <i class="fas fa-plus"></i> Add Availability
            </button>
        </div>
    </div>

    <!-- Appointments Tabs -->
    <ul class="nav nav-tabs mb-4" id="appointmentTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="pending-tab" data-bs-toggle="tab" 
                    data-bs-target="#pending" type="button" role="tab">
                Pending
                <span class="badge bg-warning ms-2" id="pendingCount">0</span>
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="upcoming-tab" data-bs-toggle="tab" 
                    data-bs-target="#upcoming" type="button" role="tab">
                Upcoming
                <span class="badge bg-primary ms-2" id="upcomingCount">0</span>
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="completed-tab" data-bs-toggle="tab" 
                    data-bs-target="#completed" type="button" role="tab">
                Completed
            </button>
        </li>
    </ul>

    <div class="tab-content" id="appointmentsContent">
        <!-- Pending Appointments -->
        <div class="tab-pane fade show active" id="pending" role="tabpanel">
            <div class="appointments-list" id="pendingAppointments">
                <!-- Will be populated dynamically -->
            </div>
        </div>

        <!-- Upcoming Appointments -->
        <div class="tab-pane fade" id="upcoming" role="tabpanel">
            <div class="appointments-list" id="upcomingAppointments">
                <!-- Will be populated dynamically -->
            </div>
        </div>

        <!-- Completed Appointments -->
        <div class="tab-pane fade" id="completed" role="tabpanel">
            <div class="appointments-list" id="completedAppointments">
                <!-- Will be populated dynamically -->
            </div>
        </div>
    </div>
</div>

<!-- View Schedule Modal -->
<div class="modal fade" id="scheduleModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">My Schedule</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div id="scheduleCalendar"></div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/doctor_appointments.js') }}"></script>
{% endblock %}